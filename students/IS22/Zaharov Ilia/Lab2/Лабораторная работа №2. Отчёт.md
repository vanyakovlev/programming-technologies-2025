# Лабораторная работа №2. Отчёт.
## План работы:
1. Настройка окружения;
2. Написание основных функций бота;
3. Задания.

## Ход работы
Было принято решение сначала прочитать текст лабораторной работы и написать весь базовый код, который в нём представлен. Однако, стоит проиллюстрировать,
как проходил процесс создания бота с помощью BotFather:
![Создание бота](https://github.com/NP1R777/programming-technologies-2025/blob/main/students/IS22/Zaharov%20Ilia/Lab2/pictures/image1.png)
![Создание первой команды бота](https://github.com/NP1R777/programming-technologies-2025/blob/main/students/IS22/Zaharov%20Ilia/Lab2/pictures/image2.png)

После проведения данных манипуляций и написания кода из текста лабораторной работы, был получен базовый AI-ассистент, интегрированный в интерфейс telegram, который
мог отвечать на вопросы пользователя. Теперь, перейдём к выполнению заданий.

## Задание №1.
В первом задании данной лабораторной работы, было необходимо добавить к ассистенту системный промпт. Было принято решение сделать это в файле ``config.py``, просто
добавив туда переменную ``SYSTEM_PROMPT`` и далее использовать её в работе:
![Добавление переменной в файл config.py](https://github.com/NP1R777/programming-technologies-2025/blob/main/students/IS22/Zaharov%20Ilia/Lab2/pictures/image3.png)

## Задание №2.
Во втором задании было необходимо сделать так, чтобы бот при ответах на сообщения пользователя, обращался к нему по имени. Для этого были применены функции
библиотеки ``aiogram``, такие как ``from_user.username`` и ``from_user.first_name``. Вот, что из этого вышло:
![Реализация обращения бота к пользователю по имени](https://github.com/NP1R777/programming-technologies-2025/blob/main/students/IS22/Zaharov%20Ilia/Lab2/pictures/image4.png)

## Задание №3.
В третьем задании была поставлена задача реализовать у бота хранение сообщение, проще говоря, добавить базу данных. Для данной задачи необходимо было поставить
дополнительные библиотеки, такие как: ``aiosqlite``, ``sqlalchemy`` и ``alembic``. Для реализации данной задачи была выбрана ORM SqlAlchemy.
Она достаточно лёгкая, простая в использовании и обладает всеми необходимыми функциями, которые нужны для выполнения данной задачи. После добавления файлов в
проект и изменения уже существующих, к боту была добавлена база данных:
![База данных бота](https://github.com/NP1R777/programming-technologies-2025/blob/main/students/IS22/Zaharov%20Ilia/Lab2/pictures/image5.png)

## Задание №4.
Четыёртое задание звучит следуюшим образом: "Добавьте поддержку контекста диалога (используйте базу данных из задания 3)". По сути, для реализации этого
фунционала в бд просто были добавлены роли ``user`` и ``assistant``, для хранения сообщений от пользователя и AI-ассистента. Таким образом, ассистент смог
ориентироваться в контексте переписки с пользователем. Так же, была добавлена новая команда ``context`` для просмотра текущих настроек контекста:
![Добавление контекста в бот](https://github.com/NP1R777/programming-technologies-2025/blob/main/students/IS22/Zaharov%20Ilia/Lab2/pictures/image6.png)

## Задание №5.
В пятом задани к боту была добавлена функция ``reset_context`` для сбрасывания контекста диалога бота с пользователем:
![Очистка контекста бота](https://github.com/NP1R777/programming-technologies-2025/blob/main/students/IS22/Zaharov%20Ilia/Lab2/pictures/image7.png)

## Задание №6.
В заключительном задании данной лабораторной работы, было необходимо реализовать поддержку получения ботом картинок. Отвечать он на них должен просто:
"Имя_пользователя, вы отправили картинку". Для этого в код былы добавлена поддержка разных типов сообщений, в том числе и изображений:
![Реализация отправки боту картинок](https://github.com/NP1R777/programming-technologies-2025/blob/main/students/IS22/Zaharov%20Ilia/Lab2/pictures/image8.png)

## Выводы
В ходе выполнения данной лабораторной работы, были закреплены навыки работы с API Mistral, получены навыки работы с библиотекой для написания ботов
в telegram ``aiogram``, а так же представилась возможность освежить в памяти работу с ORM SqlAlchemy.
